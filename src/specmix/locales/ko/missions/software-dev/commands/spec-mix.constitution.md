---
description: 대화형 또는 제공된 원칙 입력에서 프로젝트 헌장을 생성하거나 업데이트하고, 모든 종속 템플릿이 동기화 상태를 유지하도록 합니다
---

## 사용자 입력

```text
$ARGUMENTS
```

진행하기 전에 사용자 입력을 **반드시** 고려해야 합니다(비어있지 않은 경우).

## 개요

`specs/constitution.md`에서 프로젝트 헌장을 생성하거나 업데이트합니다. 작업은 (a) 프로젝트 원칙 수집/파생, (b) 포괄적인 헌장 작성, (c) 종속 아티팩트 전반에 걸친 수정사항 전파입니다.

다음 실행 흐름을 따르세요:

1. 헌장 로드 또는 생성:
   - **`specs/constitution.md`가 존재하는 경우**: 업데이트를 위해 로드.
   - **존재하지 않는 경우**: `.spec-mix/active-mission/constitution/constitution-template.md`를 시작 템플릿으로 사용하고 구조 복사.
   **중요**: 사용자는 템플릿에 사용된 것보다 적거나 많은 원칙을 요구할 수 있습니다. 숫자가 지정된 경우 이를 존중 - 일반 템플릿 구조를 따르세요. 문서를 그에 따라 업데이트할 것입니다.

2. 헌장 내용 수집/파생:
   - **프로젝트 이름**: 사용자 입력이 제공하면 사용. 그렇지 않으면 저장소 이름, package.json, pyproject.toml 또는 README에서 추론.
   - **원칙**: 사용자가 원칙을 지정하면 사용. 그렇지 않으면 템플릿 원칙을 프로젝트 도메인에 맞게 조정.
   - **거버넌스**: 비준 날짜(알 수 없으면 오늘 날짜 사용), 버전(1.0.0으로 시작), 수정 절차 포함.
   - **버전 관리** (업데이트의 경우): 시맨틱 버전 관리 규칙에 따라 버전 증가:
     - MAJOR: 이전 버전과 호환되지 않는 거버넌스/원칙 제거 또는 재정의.
     - MINOR: 새로운 원칙/섹션 추가 또는 실질적으로 확장된 지침.
     - PATCH: 명확화, 표현, 오타 수정, 비의미론적 개선.
   - 버전 범프 유형이 모호한 경우 최종 결정 전 추론 제안.

3. 헌장 내용 초안 작성:
   - 헤더의 프로젝트 이름 업데이트 (예: `# 프로젝트 헌장: 내 프로젝트`)
   - 각 원칙에 대해: 간결한 이름, 명확한 규칙(글머리 기호 또는 단락), 명시적 근거 보장.
   - 사용자 입력 및 프로젝트 컨텍스트를 기반으로 원칙 추가 또는 수정.
   - 거버넌스 섹션은 수정 절차, 버전 관리 정책 및 준수 검토 기대사항 나열 보장.
   - 마크다운 형식 및 제목 계층 구조 유지.

4. 일관성 전파 체크리스트 (이전 체크리스트를 활성 검증으로 변환):
   - `.spec-mix/active-mission/templates/plan-template.md` 읽고 "헌장 확인" 또는 규칙이 업데이트된 원칙과 일치하는지 확인.
   - `.spec-mix/active-mission/templates/spec-template.md` 읽어 범위/요구사항 정렬 - 헌장이 필수 섹션 또는 제약조건을 추가/제거하는 경우 업데이트.
   - `.spec-mix/active-mission/templates/tasks-template.md` 읽고 작업 분류가 새로운 또는 제거된 원칙 기반 작업 유형을 반영하는지 확인 (예: 관찰 가능성, 버전 관리, 테스트 규율).
   - `.spec-mix/active-mission/templates/commands/*.md`의 각 명령 파일을 읽어 일반 지침이 필요할 때 오래된 참조(CLAUDE와 같은 에이전트별 이름만)가 남아있지 않은지 확인.
   - 런타임 지침 문서 읽기 (예: `README.md`, `docs/quickstart.md` 또는 에이전트별 지침 파일이 있는 경우). 변경된 원칙에 대한 참조 업데이트.

5. 동기화 영향 보고서 생성 (업데이트 후 헌장 파일 상단에 HTML 주석으로 추가):
   - 버전 변경: 이전 → 새로운
   - 수정된 원칙 목록 (이름이 변경된 경우 이전 제목 → 새 제목)
   - 추가된 섹션
   - 제거된 섹션
   - 업데이트가 필요한 템플릿 (✅ 업데이트됨 / ⚠ 대기 중) 파일 경로와 함께
   - 의도적으로 연기된 플레이스홀더가 있는 경우 후속 TODO.

6. 최종 출력 전 검증:
   - 설명되지 않은 대괄호 토큰이 남아있지 않음.
   - 버전 라인이 보고서와 일치.
   - 날짜는 ISO 형식 YYYY-MM-DD.
   - 원칙은 선언적이고 테스트 가능하며 모호한 언어가 없음 ("should" → 적절한 경우 MUST/SHOULD 근거로 교체).

7. 완성된 헌장을 `specs/constitution.md`에 다시 쓰기 (덮어쓰기).

8. 다음과 함께 사용자에게 최종 요약 출력:
   - 새 버전 및 범프 근거.
   - 수동 후속 조치로 플래그된 파일.
   - 제안된 커밋 메시지 (예: `docs: amend constitution to vX.Y.Z (principle additions + governance update)`).

형식 및 스타일 요구사항:

- 템플릿과 정확히 동일한 Markdown 제목 사용 (레벨 낮추기/올리기 금지).

- 가독성을 유지하기 위해 긴 근거 줄 줄바꿈 (이상적으로 <100자) 하지만 어색한 줄바꿈으로 강제하지 않음.

- 섹션 사이에 한 줄 공백 유지.

- 후행 공백 피하기.

사용자가 부분 업데이트를 제공하는 경우 (예: 하나의 원칙 개정만), 여전히 검증 및 버전 결정 단계 수행.

중요 정보가 누락된 경우 (예: 비준 날짜가 정말 알 수 없는 경우), `TODO(<FIELD_NAME>): explanation` 삽입하고 연기된 항목 아래 동기화 영향 보고서에 포함.

새 템플릿을 만들지 말고 항상 기존 `specs/constitution.md` 파일에서 작업하세요.
